<!DOCTYPE html>
<html>
    <head>
    </head>
    
    <body>
        <h1>Dane z zewnÄ…trz</h1>
        <form action="#" method="POST">
            <p>First name: <input data-bind='text: firstName' /></p>
            <p>Last name: <input data-bind='value: lastName' /></p>
            <p>Email: <input data-bind='value: email' /></p>
            <p>Phone number: <input data-bind='value: phoneNumber' /></p>
            <p>Address: <input data-bind='value: address' /></p>
            <p>City: <input data-bind='value: city' /></p>
            <p>Zipp: <input data-bind='value: zipp' /></p>
            <select data-bind='options: contacts, value: contacts[0].firstName'></select>
            <button data-bind='saveUserData'>Zapisz dane</button>
        </form>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.js" type="text/javascript"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <script src="knockout.mapping-latest.js"></script>

        <script type="text/javascript">

            function PersonViewModel() {
                var self = this;
                self.contacts = ko.observableArray([]),
                self.firstName = ko.observable(""),
                self.lastName = ko.observable(""),
                self.email = ko.observable(""),
                self.phoneNumber = ko.observable(""),
                self.address = ko.observable(""),
                self.city = ko.observable(""),
                self.zipp = ko.observable("")

                self.saveUserData = function() {
                    var data_to_send = {userData: ko.toJSON(self)};
                    $.post("https://localhost:44329/api/Contact/CreateContact", data_to_send, function(data) {
                        alert("Saved data in server")
                    })
                }

                $.getJSON("https://localhost:44329/api/Contact/GetContacts", function(data) {
                    var viewModel = ko.mapping.fromJS(data);
                    ko.applyBindings(viewModel);
                });
            }            


        </script>
    </body>

</html>